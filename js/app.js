"use strict";var App=function(t){var e=this;return e.views=[{id:"home",title:"Portfolio",class:"HomeView",preload:["projects"]},{id:"projects",title:"Projects",class:"ProjectsView",preload:["home"]}],e.transitionDuration=400,e.path={viewId:"home"},e.rootPathName=new URL(appSettings.siteUrl).pathname,e.$container=t,e.initialLoad=!0,e.loader=null,e.view=null,e.layout="vertical",$(window).on("breakpoint-change",function(t,o){e.layout="mq-horizontal"===o?"horizontal":"vertical"}),e.bootstrap=function(){return $.extend(e.path,e.resolvePath(window.location.pathname)),e.loader=(new Loader).init().show(),e.loadView(e.path.viewId),e},e.resolvePath=function(t){var e,o={};return(e=t.replace(/^\//,"").split("/"))[0]&&"projects"==e[0]&&e[1]&&(o={viewId:"projects",projectId:e[1]}),o},e.loadView=function(t,o){return e.view?e.view.destroy(function(){e.doLoadView(t,o)}):e.doLoadView(t,o),e},e.doLoadView=function(t,o){var n;(n=$.grep(e.views,function(e){if(e.id==t)return e}))[0]&&n[0].class?(e.view=new window[n[0].class](e),e.view.preload(function(){var t;history.state&&history.state.view_id===e.view.id||o||(t="/"+e.view.id,"home"===e.view.id&&(t="/"),history.pushState({view_id:e.view.id},e.view.title,appSettings.siteUrl+t)),e.initialLoad?(o=!0,history.state&&history.state.view_id===e.view.id||(t="/"+e.view.id,"home"===e.view.id&&(t="/"),history.replaceState({view_id:e.view.id},e.view.title,appSettings.siteUrl+t)),e.initialLoad=!1,e.loader.hide(function(){e.$container.addClass("intro"),e.animateSvg(function(){e.$container.removeClass("intro"),e.renderView(e.view,function(){e.$container.append('<div id="finished"></div>')})}),e.$container.removeClass("loading")})):e.renderView(e.view)})):console.error("Invalid view: "+t)},e.renderView=function(t,o){t.render(function(){e.gaTrack(),$.each(e.views,function(o,n){n.id!=t.id&&$.inArray(t.id,n.preload)>-1&&new window[n.class](e).preload()}),"function"==typeof o&&o.call(e)})},e.loadStylesheets=function(t,o){var n,i;for(i=$("head"),n=0;n<t.length;n+=1)0===$('link[href="'+t[n]+'"]').length&&$("<link/>",{rel:"stylesheet",type:"text/css",href:0==t[n].indexOf("//")?t[n]:appSettings.siteUrl+t[n]}).appendTo(i),n+1===t.length&&"function"==typeof o&&o.call(e)},e.animateSvg=function(t){var o,n,i,r,c=1;(i=(n=(o=$(".background__layer--svg",e.$container)).find("svg")).find("rect")).each(function(){var t=$(this);t.data("originalY",parseInt(t.attr("y"))),t.css("opacity",0),t.hasClass("q-top")?t.attr("y","-100%"):t.attr("y","100%")}),o.show(),(r=function(t,o,n){var i,a,s;i=t.filter(".q-"+c),a=i.length,s=0,i.each(function(){var i=$(this);i.velocity({y:i.data("originalY"),opacity:1},{mobileHA:!1,delay:Math.floor(400*Math.random())+1,duration:200,complete:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){(s+=1)==a&&((c+=1)<=4?r(t,o,n):"function"==typeof n&&n.call(e))})})})})(i,n,t)},e.preloadImage=function(t,o){var n=$("<img/>");return n.on("load",function(){"function"==typeof o&&o.call(this)}),n.attr("src",appSettings.siteUrl+t),e},e.getPlaceholder=function(t){return e.$container.find('[data-placeholder="'+t+'"]')},e.setBackgroundImage=function(t,o,n){var i;return e.getPlaceholder("background-image").find("img:not(.dismissing)").addClass("dismissing").velocity("stop",!0).velocity({opacity:0},{duration:e.transitionDuration,complete:function(){$(this).remove()}}),t?((i=$("<img/>")).on("load",function(){e.getPlaceholder("background-image").prepend($(this).css("opacity",0)),$(this).velocity({opacity:1},{duration:e.transitionDuration,complete:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){"function"==typeof complete&&complete.call(e)})})}),i.attr("src",appSettings.siteUrl+t),o&&i.attr("alt",o),n&&i.attr("title",n)):"function"==typeof complete&&complete.call(e),e},e.$container.on("click","[data-view]",function(t){t.preventDefault(),e.loadView($(this).data("view"))}),e.gaTrack=function(){gtag("config","UA-111671567-1",{page_location:location.href,page_path:location.pathname})},e},ProjectsView=function(t){var e=this;if(e.icons=["/images/icons/app.png","/images/icons/cms.png","/images/icons/kiosk.png","/images/icons/multi-user.png","/images/icons/offline.png","/images/icons/responsive.png","/images/icons/url.png","/images/icons/user.png"],e.id="projects",e.context=t,e.projects=null,e.visible=!1,e.scope={built:!1,project:null,projectCount:null,previewProjects:[]},e.navigation={throttle:250,direction:1,distance:1},e.activeProjectIndex=0,e.visibleProjectCount=5,e.buildScope=function(){var t,o,n;if(!e.projects)for(e.projects=[],n=projects.length-1;n>=0;n-=1)projects[n].enabled&&(e.projects.push(projects[n]),e.context.path.projectId&&e.context.path.projectId==projects[n].id&&e.setActiveProject(e.projects.length-1));for(t=Math.floor((e.visibleProjectCount+1)/2),o=Math.ceil((e.visibleProjectCount+1)/2),e.scope.project=e.getActiveProject(),e.scope.projectCount=e.getProjectCount(),n=t;n>=1;n-=1)e.scope.previewProjects.push(e.getProject(e.scope.project.index-n));for(e.scope.previewProjects.push(e.scope.project),n=1;n<=o;n+=1)e.scope.previewProjects.push(e.getProject(e.scope.project.index+n));return e.scope.built=!0,e},e.preload=function(t){var o,n,i;e.buildScope(),e.preloadPreviewProjects(function(){(o=!0)&&n&&i&&"function"==typeof t&&t.call(e)}),e.preloadFeatureIcons(function(){n=!0,o&&n&&i&&"function"==typeof t&&t.call(e)}),e.context.loadStylesheets(["/css/main.css","//fonts.googleapis.com/css?family=Poppins:400,600&amp;subset=latin-ext","//fonts.googleapis.com/css?family=Roboto","/css/projects.css"],function(){i=!0,o&&n&&i&&"function"==typeof t&&t.call(e)})},e.preloadPreviewProjects=function(t){var o,n,i,r=0;for(o=e.scope.previewProjects,n=o.length,i=0;i<o.length;i+=1)o[i].data&&o[i].data.cover?e.context.preloadImage(o[i].data.cover,function(){(r+=1)==n&&"function"==typeof t&&t.call(e)}):(r+=1)==n&&"function"==typeof t&&t.call(e)},e.preloadFeatureIcons=function(t){var o;for(o=0;o<e.icons.length;o+=1)e.context.preloadImage(e.icons[o]),o==e.icons.length-1&&"function"==typeof t&&t.call(e)},e.render=function(t){!0!==e.scope.built&&(e.scope.distance=0,e.scope.previewProjects=[],e.buildScope()),e.animateSlider(!1,function(){e.renderProjectCounter(),e.renderProjectImage(e.scope.project),e.renderProjectSlider(),e.renderProjectDescription(),setTimeout(function(){e.context.$container.on("mousewheel.portfolio",e.onMouseWheel),e.context.$container.on("keydown.portfolio",e.onKeyDown),"ontouchstart"in window==!0&&(document.addEventListener("touchstart",i,!1),document.addEventListener("touchmove",r,!1)),"function"==typeof t&&t.call(e),0===e.getActiveProject().index?e.preloadProject(e.getNextProject()):(e.preloadProject(e.getNextProject()),e.preloadProject(e.getPreviousProject()))},e.context.transitionDuration)});var o=$.grep(e.context.views,function(t){if(t.id==e.id)return t});return o[0]&&(o=o[0],history.replaceState({view_id:o.id},o.title,appSettings.siteUrl+"/"+o.id+"/"+e.getActiveProject().data.id)),e},e.destroy=function(t){var o,n;return e.renderProjectImage(null,function(){(o=!0)&&n&&(e.context.getPlaceholder("background-image").empty(),"function"==typeof t&&t.call(e))}),e.animateSlider(!0,function(){n=!0,o&&n&&(e.context.getPlaceholder("project-slider").empty(),e.context.getPlaceholder("project-description").empty(),"function"==typeof t&&t.call(e))}),e.context.getPlaceholder("project-counter").velocity({opacity:0},{duration:e.context.transitionDuration}),e.context.$container.off("mousewheel.portfolio"),e.context.$container.off("keydown.portfolio"),e.$container=$(),e.scope.built=!1,e},e.getProjectCount=function(){return e.projects.length},e.renderProjectSlider=function(){var t,o,n;t=e.context.getPlaceholder("project-slider"),(n=(o=t.find(".project")).filter(".project--active")).removeClass("project--active"),o.filter('[data-project-index="'+e.getActiveProject().index+'"]').addClass("project--next");var i={};return"vertical"===e.context.layout?i.translateY=[n.height()*e.getNavigationDirection()*-1*e.getNavigationDistance(),0]:i.translateX=[n.width()*e.getNavigationDirection()*-1*e.getNavigationDistance(),0],t.velocity("stop",!0).velocity(i,{easing:"linear",duration:e.getNavigationThrottle(),complete:function(){var n,i,r,c;for($(this).removeAttr("style"),o.filter(".project--next").removeClass("project--next"),r=1==e.getNavigationDirection()?e.scope.previewProjects:e.scope.previewProjects.reverse(),n=0;n<r.length;n+=1)c=r[n],(i=o.filter('[data-project-index="'+c.index+'"]')).length?e.updateProjectPreview(c,i):1==e.getNavigationDirection()?t.append(e.renderProjectPreview(c,t)):t.prepend(e.renderProjectPreview(c,t));1==e.getNavigationDirection()?o.slice(0,e.getNavigationDistance()).remove():o.slice(-1*e.getNavigationDistance()).remove()}}),e},e.renderProjectPreview=function(t,o){var n,i,r;return r=["project"],t.index==e.scope.project.index&&r.push("project--active"),t.data?t.data.logo_white&&r.push("project--filled"):r.push("placeholder"),t.data?(n=$("<a></a>",{href:appSettings.siteUrl+"/projects/"+t.data.id,class:r.join(" "),"data-project-index":t.index}),i=t.data.logo?$("<img/>",{src:t.data.logo,alt:t.data.title}):$("<span></span>",{class:"title"}).text(t.data.title),n.append(i),n.on("click",function(o){o.preventDefault(),t.index!=e.activeProjectIndex&&e.switchProject(t)})):n=$("<div></div>",{class:r.join(" "),"data-project-index":t.index}),n},e.renderProjectImage=function(t,o){var n;return e.context.getPlaceholder("background-image").find("img:not(.dismissing)").addClass("dismissing").velocity("stop",!0).velocity({opacity:0},{duration:e.context.transitionDuration,complete:function(){$(this).remove()}}),t?((n=$("<img/>")).on("load",function(){$(this).data("projectId")==e.scope.project.data.id?(e.context.getPlaceholder("background-image").prepend($(this).css("opacity",0)),$(this).velocity({opacity:1},{duration:e.context.transitionDuration,complete:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){"function"==typeof o&&o.call(e)})})):"function"==typeof o&&o.call(e)}),n.data("projectId",t.data.id),n.attr("src",appSettings.siteUrl+t.data.cover),n.attr("alt",t.data.title)):"function"==typeof o&&o.call(e),e},e.renderProjectDescription=function(){var t,o,n,i;n=(t=e.context.getPlaceholder("project-description")).find(".project-content:not(.dismissing)"),i=$("<h2></h2>").text(e.scope.project.data.title),e.scope.project.data.title_lang&&i.attr("lang",e.scope.project.data.title_lang),o=$("<div></div>",{class:"project-content"}).append($("<article></article>").append(i).append($("<div></div>",{class:"body"}).append($(e.scope.project.data.description)))).css({opacity:0});var r={opacity:0};if("vertical"===e.context.layout?r.translateY=320*e.getNavigationDirection()*-1:r.translateX=150*e.getNavigationDirection()*-1,n.addClass("dismissing").velocity("stop",!0).velocity(r,{easing:"linear",duration:e.context.transitionDuration,complete:function(){$(this).remove()}}),1==e.getNavigationDirection()?t.append(o):t.prepend(o),"horizontal"==e.context.layout){o.closest(".view--projects__description").animate({scrollTop:0},0)}var c={opacity:1};return"vertical"===e.context.layout?c.translateY=[0,320*e.getNavigationDirection()]:(c.translateX=[0,150*e.getNavigationDirection()],e.renderFeatures(o)),o.velocity(c,{easing:"linear",duration:e.context.transitionDuration,complete:function(){"vertical"===e.context.layout&&e.renderFeatures($(this))}}),e},e.renderFeatures=function(t){var o,n,i;for(o=$("<ul></ul>",{class:"features"}),e.scope.project.data.available?o.append(e.renderFeature({icon:"url",title:e.scope.project.data.url,tooltip:e.scope.project.data.url+" (you will be redirected to external website)"},e.scope.project.data.url)):o.append(e.renderFeature({icon:"offline",title:"Offline"})),i=0;i<e.scope.project.data.features.length;i+=1)o.append(e.renderFeature(e.scope.project.data.features[i]));return e.scope.project.data.date&&o.append(e.renderFeature({title:e.scope.project.data.date,tooltip:"Made in "+e.scope.project.data.date})),t.find("article").append(o),n=o.find(".feature"),"vertical"===e.context.layout&&n.each(function(t,o){$(this).css("z-index",n.length-t).velocity({translateY:[0,-$(this).outerHeight()]},{duration:e.context.transitionDuration/4,delay:50*t})}),e},e.renderFeature=function(t,o,n){var i,r,c,a,s,l;return i=$("<li></li>",{class:"feature feature--"+t.icon}),o&&(c=$("<a></a>",{href:o,target:"_blank"})),t.icon?a=$("<img />",{src:appSettings.siteUrl+"/images/icons/"+t.icon+".png",alt:"Icon "+t.icon}):s=$("<span></span>").text(t.title),r=$("<div></div>",{class:"feature__content"+(o?" has-url":"")}),o?r.append(c.append(a||s)):r.append(a||s),l=$("<span></span>",{class:"feature__tooltip"}),o&&"horizontal"===e.context.layout?l.append(c.clone().text(t.tooltip?t.tooltip:t.title)):l.text(t.tooltip?t.tooltip:t.title),r.hover(function(){"vertical"===e.context.layout&&l.velocity("stop",!1).velocity({opacity:1,translateY:10},{duration:50})},function(){"vertical"===e.context.layout&&l.velocity("stop",!1).velocity({opacity:0,translateY:0},{duration:50})}),i.append(r).append(l)},e.renderProjectCounter=function(){var t;return 0==(t=e.context.getPlaceholder("project-counter")).css("opacity")&&t.velocity({opacity:1},{duration:e.context.transitionDuration}),t.text(e.scope.project.index+1+" / "+e.scope.projectCount),e},e.updateProjectPreview=function(t,o){return t.index==e.scope.project.index&&o.addClass("project--active"),e},e.animateSlider=function(t,o){var n;(n=$(".view--projects",e.context.$container)).show().velocity({opacity:t?0:1,top:t?"-100%":0},{duration:200,complete:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){t&&n.hide(),"function"==typeof o&&o.call(e)})})},e.getProjects=function(){return e.projects},e.getProject=function(t){return{data:e.getProjects()[t],index:t}},e.getActiveProject=function(){return e.getProject(e.activeProjectIndex)},e.setActiveProject=function(t){return e.getProjects()[t]&&(e.activeProjectIndex=t),e.getProjects()[e.activeProjectIndex]},e.getPreviousProject=function(){return e.getProject(e.getActiveProject().index-1)},e.getNextProject=function(){return e.getProject(e.getActiveProject().index+1)},e.getNavigationDirection=function(){return e.navigation.direction},e.setNavigationDirection=function(t){return e.navigation.direction=-1==t?-1:1},e.getNavigationThrottle=function(){return e.navigation.throttle},e.setNavigationThrottle=function(t){return e.navigation.throttle=t},e.getNavigationDistance=function(){return e.navigation.distance},e.setNavigationDistance=function(t){return e.navigation.distance=t},e.throttle=function(t,e){var o=!1;return function(){o||(t.apply(this,arguments),o=!0,setTimeout(function(){o=!1},e))}},e.debounce=function(t,e,o){var n;return function(){var i=this,r=arguments,c=o&&!n;clearTimeout(n),n=setTimeout(function(){n=null,o||t.apply(i,r)},e),c&&t.apply(i,r)}},e.preloadProject=function(t,o){var n,i;return t.data?(t.data.logo?e.context.preloadImage(t.data.logo,function(){(n=!0)&&i&&"function"==typeof o&&o.call(this)}):n=!0,t.data.cover?e.context.preloadImage(t.data.cover,function(){i=!0,n&&i&&"function"==typeof o&&o.call(this)}):i=!0):"function"==typeof o&&o.call(this),e},e.navigateToProject=function(t,o){return e.setActiveProject(t.index),1==e.getNavigationDirection()?e.preloadProject(e.getNextProject()):e.preloadProject(e.getPreviousProject()),e.scope.previewProjects=[],e.buildScope(),e.renderProjectCounter(),e.renderProjectImage(e.scope.project),e.renderProjectSlider(),e.renderProjectDescription(),setTimeout(function(){"function"==typeof o&&o.call(e,t)},e.context.transitionDuration),e},e.switchProject=e.debounce(function(t){return t.data&&(e.setNavigationDirection(t.index>e.getActiveProject().index?1:-1),e.setNavigationDistance(Math.abs(t.index-e.getActiveProject().index)),e.navigateToProject(t,function(){var t=e.getActiveProject(),o=$.grep(e.context.views,function(t){if(t.id==e.id)return t});o[0]&&(o=o[0],history.replaceState({view_id:o.id},o.title,appSettings.siteUrl+"/"+o.id+"/"+t.data.id)),e.context.gaTrack()})),e},e.getNavigationThrottle()),e.onMouseWheel=function(t){var o,n=t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?-1:1;if((o="vertical"===e.context.layout?$(t.target).closest(".body"):$(t.target).closest(".view--projects__description")).length){var i=o.get(0);switch(n){case-1:if(0!==i.scrollTop)return e;break;case 1:if(i.scrollHeight-i.scrollTop>i.clientHeight)return e}}return t.preventDefault(),-1===n?e.switchProject(e.getPreviousProject()):e.switchProject(e.getNextProject()),e},e.onKeyDown=function(t){return-1!=$.inArray(t.keyCode,[33,36,38])&&(t.preventDefault(),e.switchProject(e.getPreviousProject())),-1!=$.inArray(t.keyCode,[34,35,40])&&(t.preventDefault(),e.switchProject(e.getNextProject())),e},"ontouchstart"in window==!0)var o=null,n=null,i=function(t){o=t.touches[0].clientX,n=t.touches[0].clientY},r=function(t){if(o&&n){var i=t.touches[0].clientX,r=t.touches[0].clientY,c=o-i,a=n-r;Math.abs(c)>Math.abs(a)&&(c>0?e.switchProject(e.getNextProject()):e.switchProject(e.getPreviousProject()))}}},HomeView=function(t){var e=this;return e.id="home",e.context=t,e.backgroundImageSrc="/images/profile.jpg",e.preload=function(t){var o,n;e.context.preloadImage(e.backgroundImageSrc,function(){(o=!0)&&n&&"function"==typeof t&&t.call(e)}),e.context.loadStylesheets(["/css/main.css","//fonts.googleapis.com/css?family=Poppins:400,600&amp;subset=latin-ext","/css/home.css"],function(){n=!0,o&&n&&"function"==typeof t&&t.call(e)})},e.render=function(t){return e.context.setBackgroundImage(e.backgroundImageSrc,"Profile image"),e.context.$container.find(".view--home").show().velocity({translateY:[0,100],opacity:1},{duration:e.context.transitionDuration/2,complete:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){"function"==typeof t&&t.call(e)})}),e},e.destroy=function(t){return e.context.setBackgroundImage(null),e.context.$container.find(".view--home").velocity({translateY:100,opacity:0},{duration:e.context.transitionDuration/2,complete:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){e.context.$container.find(".view--home").hide(),"function"==typeof t&&t.call(e)})}),e},e};